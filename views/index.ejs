<% 
const familyData = {
    title: "Our Family Legacy",
    // Adjust these final coordinates using your gathered data
    members: [
        { id: "gran", name: "Grandpa", img: "/images/images.jpeg", top: 82.5, left: 33.1 },
        { id: "gran", name: "Granny", img: "/images/granny.png", top: 80.5, left: 40.4 },
        { id: "gma1c", name: "Grandma", img: "/images/Grandma.png", top: 80.5, left: 60},
        { id: "gpa1c", name: "Grandpa", img: "/images/GrandpaC.png", top: 82.5, left: 67 },
        { id: "dad", name: "Dad", img: "/images/Dad.png", top: 65.8, left: 47.2 },
        { id: "mom", name: "Mom", img: "/images/Mom.png", top: 65.8, left: 52.8 },
        { id: "amy", name: "Amy", img: "/images/Amy.png", top: 53.8, left: 64.8 },
        { id: "jo", name: "Jo", img: "/images/Jo.png", top: 45.8, left: 76.8 },
        { id: "wendy", name: "Wendy", img: "/images/wendy.png", top: 50.8, left: 50.1 },
        { id: "rich", name: "Rich", img: "/images/rich.png", top: 53.8, left: 35.1 },
        { id: "devon", name: "Devon", img: "/images/Devon.png", top: 46.8, left: 24.1 },
        { id: "belle", name: "Belle", img: "/images/belle.png", top: 42.8, left: 17.1 },
        { id: "dylan", name: "Dylan", img: "/images/Dylan.png", top: 55.8, left: 14.1 },
        { id: "axel", name: "Axel", img: "/images/Axel.png", top: 36.8, left: 10.1 },
        { id: "peanut", name: "Peanut", img: "/images/peanut.png", top: 30.8, left: 20.1 },
        { id: "dixie", name: "Dixie", img: "/images/dixie.png", top: 37.0, left: 35.1 },
        { id: "maria", name: "Maria", img: "/images/maria.png", top: 44.0, left: 59.8 },
        { id: "jason", name: "Jason", img: "/images/jason.png", top: 38.0, left: 65.8 },
        { id: "rhi", name: "Rhi", img: "/images/rhi.png", top: 30.8, left: 57.8 },
        { id: "joel", name: "Joel", img: "/images/joel.png", top: 39.8, left: 45.2 },
        { id: "maggy", name: "Maggy", img: "/images/maggy.png", top: 28.8, left: 43.2},
        // Add the rest of your members here...
    ]
};
%>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= familyData.title %></title>
    <style>%
        :root {
            --trunk: #5d4037;
            --cream: #f4ece1;
        }
body { 
    background-color: var(--cream); 
    margin: 0; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    height: 100vh;      /* Set body to full screen height */
    overflow: hidden;   /* This line stops all scrolling */
}

        h1 { 
            font-family: 'Georgia', serif;
            color: var(--trunk);
            margin: 2vh 0;
            font-variant: small-caps;
            font-size: 2.5rem;
        }

        /* Tree Viewport set to fill width. 
           Aspect ratio maintained: (401 / 679) * 100 = ~59vh
        */
.tree-viewport {
    position: relative;
    height: 80vh;       /* This line forces the tree to fit within the screen height */
    aspect-ratio: 679 / 401; 
    background-image: url('/images/tree.png'); 
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
}
.member-card {
    position: absolute;
    display: flex;
    flex-direction: column;
    align-items: center;
    transform: translate(-50%, -50%); /* Keeps coordinates centered */
    width: 10vh; /* Scales width relative to screen height */
    text-decoration: none;
    z-index: 10;
}

        .member-card:hover {
            transform: translate(-50%, -60%) scale(1.1);
        }

.photo-circle {
    width: 8vh;  /* Scales the circle size */
    height: 8vh; /* Keeps it a perfect circle */
    border-radius: 50%;
    border: 0.4vh solid white;
    box-shadow: 0 0.5vh 1vh rgba(0,0,0,0.2);
    overflow: hidden;
    background: white;
}

        .photo-circle img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
        }
        
.name-label { 
    margin-top: 0.5vh; 
    font-size: 1.2vh; /* Text scales so it doesn't overlap on small screens */
    font-weight: bold; 
    color: #333; 
    background: rgba(255,255,255,0.9);
    padding: 0.2vh 0.8vh;
    border-radius: 1vh;
    white-space: nowrap;
}
    </style>
</head>
<body>

    <h1><%= familyData.title %></h1>

    <div class="tree-viewport">
        <% familyData.members.forEach((person) => { %>
            <a href="/profile/<%= person.id %>" class="member-card" style="top: <%= person.top %>%; left: <%= person.left %>%;">
                <div class="photo-circle">
                    <img src="<%= person.img %>" alt="<%= person.name %>" onerror="this.src='https://via.placeholder.com/100'">
                </div>
                <span class="name-label"><%= person.name %></span>
            </a>
        <% }) %>
    </div>

</body>
</html>